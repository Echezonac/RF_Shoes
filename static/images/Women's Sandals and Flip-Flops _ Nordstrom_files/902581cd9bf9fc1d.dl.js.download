(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[25],{"fmwt":function(e,t,r){"use strict";r.r(t);r("rGqo");var o=r("C1oh");const s=/^([^?#]*)([?]([^#]*))?([#].*)?$/;var a=e=>(...t)=>{const[r]=t;for(const[o,s]of Object.entries(e))if(o===r.type)return s(...t)},c=r("5j0p"),n=r("QqIZ");var d=r("xgc2"),i=r("h+kq"),p=r("jEzm");var b=(e,t)=>Array.isArray(t)?[{clientId:"mwp",eventTime:Date.now()},t.map(t=>({bucketingId:Object(p.selectShopperExperimentId)(e),customer:i.a.selectEventCustomer(e),eventTime:Date.now(),eventType:"com.nordstrom.customer.event.ExperimentVariationExposed",experimentName:t.n,variationName:t.v,projectName:t.p,source:i.a.selectEventSource(e)}))]:[{clientId:"mwp",eventTime:Date.now(),eventType:"com.nordstrom.customer.event.ExperimentVariationExposed"},{bucketingId:Object(p.selectShopperExperimentId)(e),customer:i.a.selectEventCustomer(e),experimentName:t.n,variationName:t.v,projectName:t.p,source:i.a.selectEventSource(e)}],u=r("AzHN");var l=e=>{const t={isProd:e},r=new u.a(t);r.loadFromBrowser();return r.getData().version},j=r("sFCV"),O=r("iEFf"),m=r("uVNg"),h=r("4+ph"),y=r("THLp");var f=async function(e,t,r,o){const s=t(),a=`${Object(y.C)(s)}storenumber/${e}?format=json&apiKey=${Object(y.B)(s)}`,c=await Object(h.a)(r,a);if(c.err||!c.res||!c.res.ok){const e={component:"storeModeModal",category:"Fetch-Error",message:m.c,methodName:"fetchStoreDetails"};return o.logError(c.err||{},e),[c,m.c]}return[c,null]},I=r("r1Qe");var v=async(e,t,r,o)=>{const s=r(),a=Object(I.n)(s),{fetch:c,logger:n}=o;t(Object(j.o)({storeDetailsId:a}));const[i,p]=await f(a,r,c,n);if(p)t(Object(j.n)({error:p}));else{const e=Object(d.a)(i);t(Object(j.p)(e))}},S=r("w0wl"),E=r("kdVo"),g=r("2B5G"),w=r("QUpY"),T=r("H5eo"),C=r("HBJ3"),k=r("/KGk"),N=r("dKd5"),D=r("jIyh"),L=r("+va2");var M=(e,t)=>setTimeout(()=>{const r=e(),{featureFlags:{isStoreProfileEnabled:o},shopper:{Context:{AuthenticationState:s},Id:a,SessionId:c,ShopperToken:n},storeMode:{postalCode:d,selectedStoreIds:i}}=r,{shouldUseStoreProfile:p}=Object(S.c)(r);if(!(s>1&&p&&o))return;const b=[{attributeType:"preferredStores",attribute:{storeNumber:i[0]?i[0].toString():"",providedZipCode:d},subType:{storeType:"FLS"}}],u="/pas/attributes/"+a,l={method:"PUT",headers:{...Object(k.a)({method:"PUT",sessionId:c}),...Object(k.b)({method:"PUT",shopperId:a,shopperToken:n})},body:JSON.stringify(b)},j=Date.now();let O;const{fetch:m}=t;m(u,l).then(e=>(O=Date.now()-j,Object(N.a)(e))).then(r=>{const{status:o}=r;switch(o){case 200:Object(L.a)({apiResponse:{methodName:"savePreferredStore",nordRequestId:l.headers["Nord-Request-Id"],statusCode:o,timeTakenInMSec:O,url:u}},e,t.logger);break;default:throw Object(D.a)(r)}}).catch(r=>{Object(L.a)({apiResponse:{error:r,methodName:"savePreferredStore",nordRequestId:l.headers["Nord-Request-Id"],statusCode:r.status,timeTakenInMSec:O,url:u}},e,t.logger)})});var q=async(e,{fetch:t,logger:r})=>{const{shopper:{Id:o,SessionId:s,ShopperToken:a}}=e(),c="/pas/attributes/"+o+"?idType=shopperId&attributeTypes=preferredStores:FLS",n={method:"DELETE",headers:{...Object(k.a)({method:"DELETE",sessionId:s}),...Object(k.b)({method:"DELETE",shopperId:o,shopperToken:a})}},d=Date.now();let i;return await t(c,n).then(e=>(i=Date.now()-d,Object(N.a)(e))).then(t=>{const{status:o}=t,s={apiResponse:{methodName:"deletePreferredStore",nordRequestId:n.headers["Nord-Request-Id"],statusCode:o,timeTakenInMSec:i,url:c}};switch(o){case 204:return Object(L.a)(s,e,r),null;case 401:return Object(L.a)(s,e,r),m.g;default:throw Object(D.a)(t)}}).catch(t=>(Object(L.a)({apiResponse:{error:t,methodName:"deletePreferredStore",nordRequestId:n.headers["Nord-Request-Id"],statusCode:t.status,timeTakenInMSec:i,url:c}},e,r),m.a))};const A=a({[w.i.type]:async(e,t,r,o)=>{const s=r(),{operatingCountryCode:a}=Object(g.a)(s),{selectedStoreIds:i,selectedLocalMarketId:b}=Object(I.g)(s),u=Object(I.i)(s),m=Object(I.j)(s),{isBot:h}=Object(p.selectShopper)(s),y=Object(C.f)(s),f=l(y),v=f<4,S=f>=4,E=i.length>0,w=b.length>0||S,T=w||E,k=!w||!E,N=Object(c.a)(a,u)?u:void 0;if(v&&T&&k&&!h){const e=async function(e,t,r,o){const[s,a]=await Object(n.a)(e,t,r,o);return a?[]:Object(d.b)(s,r)}(N,m,r,o);e.storeIds.length>0&&t(Object(j.m)({postalCode:N,...e}))}else setTimeout(()=>{Object(O.a)(e,t,r)})},[j.g.type]:async(e,t,r,o)=>{t(Object(j.i)());const s=await q(r,o);s?t(Object(j.h)({error:s})):(t(Object(j.j)()),Object(O.a)(e,t,r))},[j.l.type]:(e,t,r,o)=>{const s=r();if(Object(I.m)(s))return;if(!Object(I.n)(s))return t(Object(j.C)()),void t(Object(j.k)());v(e,t,r,o)},[j.A.type]:v,[j.C.type]:async(e,t,r,o)=>{const s=r(),a=Object(S.a)(s),c=Object(I.i)(s),i=Object(I.j)(s);if(a.length){const[e,t]=b(s,a);o.businessEventLogger.logBusinessEvent(e,t)}if(c&&!Object(I.a)(s)){t(Object(j.r)({postalCode:c,radius:i}));const[e,s]=await Object(n.a)(c,i,r,o),a=s?[]:Object(d.b)(e,r);t(s?Object(j.q)({error:s}):Object(j.s)(a))}},[j.B.type]:(e,t,r,o)=>{Object(O.a)(e,t,r,o),M(r,o)},[j.y.type]:async(e,t,r,o)=>{const{postalCode:s,radius:a=T.b}=e.payload;t(Object(j.r)({postalCode:s,radius:a}));const[c,i]=await Object(n.a)(s,a,r,o);if(i)return void t(Object(j.q)({error:i}));const p=Object(d.b)(c,r);t(Object(j.s)(p))},[T.a]:O.a,[j.t.type]:O.a,[j.v.type]:O.a,[j.w.type]:O.a,[j.F.type]:O.a,[j.G.type]:O.a,[j.F.type]:O.a,[j.G.type]:O.a,[j.b.type]:O.a,[j.a.type]:O.a,[j.D.type]:async(e,t,r,a)=>{const{postalCode:i,storeNumber:p,href:b}=e.payload,u=r(),{operatingCountryCode:l}=Object(g.a)(u),{isLocalMarketEnabled:m,isPickupInStoreEnabled:h}=Object(E.a)(u);let y=b;var f;if(h&&Object(c.a)(l,i)&&(f=p,Number.isInteger(f)&&f>0)){const[o,c]=await Object(n.a)(i,T.b,r,a);if(!c){const a=Object(d.b)(o,r);if(!!a.storesById[p]){const o={...a,postalCode:i,radius:T.b,selectedStoreIds:[p],selectedLocalMarketId:a.localMarketIds[0]||"",filters:[T.d.STORE],isStoreModeActive:!0};m||(o.selectedLocalMarketId="",o.localMarketIds=[],o.localMarketsById={}),Object(O.a)(e,t,r),t(Object(j.E)(o)),y=function(e,t){let r;if(e){const[,o,,a="",c=""]=s.exec(e)||[];r=`${o}?${a}${a?"&":""}store=${t}&storeAvailability=${t}${c}`}return r}(b,p)}}}y&&t(Object(o.push)(y))}});t.default=A}}]);